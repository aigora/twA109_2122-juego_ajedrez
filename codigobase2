#include <stdio.h>
#include <conio.h>
#include <windows.h>
#include "SerialClass/SerialClass.h"
#define N 8


void gotoxy(int x, int y)
{

    HANDLE hcon;
    hcon = GetStdHandle(STD_OUTPUT_HANDLE);
    COORD dwPos;
    dwPos.X = x;
    dwPos.Y = y;
    SetConsoleCursorPosition(hcon, dwPos);



}

char tablero[N][N];
void imprimir_tablero();
void inicializar_tablero();


int main(void)
{
    char jugador1[] = "BLANCO";
    char jugador2[] = "NEGRO";
    char puerto[6] = "COM4";
   
    Serial* Arduino = new Serial(puerto);
    char salir = 'a';
    
   while (Arduino->IsConnected())
    {
        
        

        printf("Arduino conectado\n");
        printf("Enviando:%s\n", jugador1);
        Arduino->WriteData(jugador1, sizeof(jugador1));
        Sleep(500);
        Arduino->ReadData(jugador1, sizeof(jugador1));
        printf("Recibiendo:%s\n", jugador1);
        Sleep(500);

        printf("Cambio de turno\n");

        Arduino->WriteData(jugador2, sizeof(jugador2));
        printf("Enviando:%s\n", jugador2);
        Sleep(500);
        Arduino->ReadData(jugador2, sizeof(jugador2));
        printf("Recibiendo:%s\n", jugador2);
        Sleep(500);
        
        printf("Cambio de turno\n");
    }
    
    








    
    inicializar_tablero();
    imprimir_tablero();

    //printf("Vamos a proceder a jugar si desea salir de la partida o rendirse pulse w\n");


   




}

void inicializar_tablero() {
    int i, j, k;
    char primera_fila[] = "tcadract";
    char ultima_fila[] = "TCADRACT";
    for (j = 0; j < N; j++)
    {
        tablero[0][j] = primera_fila[j];
        tablero[1][j] = 'p';


        for (i = 2; i < 6; ++i)
        {
            tablero[i][j] = ' ';
        }

        tablero[6][j] = 'P';
        tablero[7][j] = ultima_fila[j];
    }
}

void imprimir_tablero()
{
    int i, j;

    printf("\n   ");
    for (j = 0; j < N; j++)
    {
        printf("%d ", j);

    }
    printf("\n");
    printf("  +---------------+\n");

    for (i = 0; i < N; i++) {
        printf("%c |", 'a' + i);
        for (j = 0; j < N; j++)
        {
            printf("%c ", tablero[i][j]);
        }
        printf("\b|\n");

    }
    printf("  +---------------+\n");
}











































